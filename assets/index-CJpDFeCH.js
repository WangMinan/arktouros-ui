import{a as c}from"./axios-BimPEqV4.js";import{N as o}from"./nprogress-DrSneiWl.js";import{r as t}from"./index-BcMSqL53.js";import{E as a}from"./element-plus-qZdtYf4J.js";o.configure({easing:"ease",speed:1e3,showSpinner:!1,trickleSpeed:200,minimum:.3,parent:"body"});const u=()=>{o.start()},n=()=>{o.done()},s=c.create({baseURL:"https://arktouros-server.wangminan.me/api/v0"});s.interceptors.request.use(r=>(u(),r),r=>Promise.reject(r)),s.interceptors.response.use(async r=>{if(n(),r.data.code===void 0)a.error("\u540E\u7AEF\u670D\u52A1\u5668\u5F02\u5E38,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458");else switch(r.data.code){case 2e3:return r;case 400:return a.error(r.data.msg),Promise.reject(r);case 4040:a.error("\u60A8\u7684\u8BF7\u6C42\u7684\u8D44\u6E90\u4E0D\u5B58\u5728,\u5F53\u524D\u9875\u9762\u5C06\u88AB\u5237\u65B0"),t.push(t.currentRoute.value.fullPath).then(e=>e);break;case 5e3:a.error("\u540E\u7AEF\u670D\u52A1\u5F02\u5E38,\u5F53\u524D\u9875\u9762\u5C06\u88AB\u5237\u65B0,\u82E5\u65E0\u6548\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"),t.push(t.currentRoute.value.fullPath).then(e=>e);break;default:return r}},r=>(n(),a.error("\u540E\u7AEF\u670D\u52A1\u5668\u5F02\u5E38,\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458"),Promise.reject(r)));const l=async r=>{try{const{data:e}=await s.get("/service/namespaces",{params:{query:r}});return e.code!==null&&e.code===2e3?e:e.code!==null?(a.error(`\u83B7\u53D6\u547D\u540D\u7A7A\u95F4\u5217\u8868\u5931\u8D25, ${e.message}`),null):(a.error("\u83B7\u53D6\u547D\u540D\u7A7A\u95F4\u5217\u8868\u5931\u8D25"),null)}catch(e){a.error(`\u83B7\u53D6\u547D\u540D\u7A7A\u95F4\u5217\u8868\u5931\u8D25, ${e.message}`)}return null},m=async r=>{try{const{data:e}=await s.get("/services",{params:{query:r.query,namespace:r.namespace,pageNum:r.pageNum,pageSize:r.pageSize}});return e.code!==null&&e.code===2e3?e:e.code!==null?(a.error(`\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25, ${e.message}`),null):(a.error("\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25"),null)}catch(e){a.error(`\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25, ${e.message}`)}return null},p=async r=>{try{r||(r="default");const{data:e}=await s.get("/service/topology",{params:{namespace:r}});return e.code!==null&&e.code===2e3?e:e.code!==null?(a.error(`\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25, ${e.message}`),null):(a.error("\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25"),null)}catch(e){a.error(`\u83B7\u53D6\u670D\u52A1\u5217\u8868\u5931\u8D25, ${e.message}`)}return null};export{s as _,l as a,p as b,m as g};
